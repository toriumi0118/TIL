# 設計のコツ

あんま正規化しない方がよさそう。
理由は、queryがあまり強力ではないのでdocをとって再度queryを投げ直すみたいなことをしないといけないパターンが多くなりがち。
client joinとかで頑張るのがつらみ。

なので、見た目上一撃でデータを取得できるように限りなくflatに持つのがよさそう。
必要ならarray_containsとかで投げてもよさそう。

## rule

secureなやつは一旦sub collectionにしておいて、基本的には誰でも取れるようにしておく。
Create, Update, Deleteは権限に応じて。

あとは冗長でもある程度一発で取れるようにしておいた方が楽そう。
